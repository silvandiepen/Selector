$.fn.Selector=function(e){var t,n,i,o,c={},a=$(this),r=!1,s=$.extend({clickToOpen:!1,setActiveOnClick:!0,checkedClass:"checked",setOrder:!0,transitionTime:300,valueAttr:"data-value",arrows:300,onSelectorChange:!1,onActiveChange:!1,onCheckedChange:!1,onGoTo:!1},e);return e.onMobile&&$(window).outerWidth()<750&&(s=$.extend({},s,e.onMobile)),this.each(function(e,l){var h=function(e){if(s.init)var t=setInterval(function(){r?clearInterval(t):u()},1e3);s.arrows&&(i=$("<div>").addClass("selector-arrows"),i.append($("<a>").addClass("selector-arrows-up").on("click",function(){w("up")})),i.append($("<a>").addClass("selector-arrows-down").on("click",function(){w("down")})),a.prepend(i)),s.clickToOpen||a.on("click","li",function(e){e.preventDefault(),f($(this))}),s.setActiveOnClick&&a.on("click","li a",function(e){$(this);p(a,$(this).parent()),f($(this).parent()),s.clickToOpen||e.preventDefault(),a.find(".active").each(function(){$(this).removeClass("active")}),$(this).parent().addClass("active")}),a.on("activeChange",function(){d(s.onActiveChange)&&s.onActiveChange()}),a.on("checkedChange",function(){d(s.onCheckedChange)&&s.onCheckedChange()}),a.on("selectorChange",function(){d(s.onSelectorChange)&&s.onSelectorChange()}),a.on("selectorChange",function(){d(s.onSelectorChange)&&s.onSelectorChange()}),a.mouseleave(function(){setTimeout(function(){f(a.find("li."+s.checkedClass))},200)}),a.scroll(function(){C(a),o=a.scrollTop(),s.arrows&&k()}),e&&"function"==typeof e&&e()},d=function(e){var t={};return e&&"[object Function]"===t.toString.call(e)},u=function(){r||(g(a),f(a.find("li."+s.activeClass)),s.arrows&&k(),console.log("Selector: #"+$(this).attr("id")+" initialized"),r=!0)},f=function(e){var t=e.index(),n=t*e.outerHeight();a.animate({scrollTop:n},s.transitionTime)},g=function(e){t=e.outerHeight()/2;var n=e.find("li."+s.checkedClass);p(e,n),v(e,n),c.top=t-n.outerHeight()/2,c.bottom=c.top,s.arrows,e.find("ul").css({"margin-top":c.top,"margin-bottom":c.bottom}),r=!0},C=function(e){e.find("li").each(function(){$(this).position().top<t&&$(this).position().top+$(this).outerHeight()>t&&!$(this).hasClass("checked")&&(n=$(this).index(),e.find("li").each(function(){$(this).removeClass("checked").attr("data-order",n-$(this).index())}),$(this).addClass("checked"),v(e,$(this)))})},v=function(e,t){e.attr("data-checked",t.attr(s.valueAttr)).triggerAll("checkedChange selectorChange")},p=function(e,t){e.attr("data-active",t.attr(s.valueAttr)).triggerAll("activeChange selectorChange")},k=function(){i.css("top",t+o)},w=function(e){var t;t="up"===e?a.find("li."+s.checkedClass).index()-1:"down"===e?a.find("li."+s.checkedClass).index()+1:e,f(a.find("li:eq("+t+")"))},m=function(e){f($(s.goto)),d(e)&&e()};s.init&&h(),s.goto&&m(s.goto)})},function(e){e.fn.extend({triggerAll:function(e,t){var n,i=this,o=e.split(" ");for(n=0;n<o.length;n+=1)i.trigger(o[n],t);return i}})}(jQuery);
